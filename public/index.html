<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blockchain FaaS Platform</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>â›“ï¸ Blockchain FaaS Platform</h1>
      <p>Decentralized Function-as-a-Service powered by Ethereum Smart Contracts & IPFS</p>
    </header>

    <div class="tabs">
      <button class="tab-btn active" onclick="showTab('home')">ğŸ  Home</button>
      <button class="tab-btn" onclick="showTab('register')">ğŸ“¤ Register Function</button>
      <button class="tab-btn" onclick="showTab('list')">ğŸ“‹ List Functions</button>
      <button class="tab-btn" onclick="showTab('invoke')">â–¶ï¸ Invoke Function</button>
    </div>

    <!-- ğŸ  HOME TAB -->
    <div id="home" class="tab-content active">
      <section>
        <h2>ğŸš€ Overview</h2>
        <div class="card">
          <p>
            <strong>Blockchain FaaS</strong> revolutionizes decentralized computing by enabling <strong>Function-as-a-Service (FaaS)</strong> deployment
            on blockchain with <span class="highlight">constant gas fees</span> â€” no matter how large your code is.
          </p>
          <p style="margin-top:10px;">
            We achieve this by storing the actual function code on <strong>IPFS</strong> and recording only its small, fixed-size
            <strong>Content Identifier (CID)</strong> on the blockchain. This drastically reduces transaction costs and makes
            decentralized FaaS practical and scalable.
          </p>
        </div>

        <h2>âš™ï¸ Technology Stack</h2>
        <div class="tech-stack">
          <div class="tech">Ethereum / Solidity</div>
          <div class="tech">IPFS (InterPlanetary File System)</div>
          <div class="tech">Node.js + Express</div>
          <div class="tech">Web3.js</div>
          <div class="tech">HTML, CSS, JS Frontend</div>
        </div>

        <br>
        <br>
        <h2>ğŸ’¡ Novelty</h2>
        <div class="card">
          <ul style="padding-left:20px;">
            <li>Constant-cost function registration irrespective of code size.</li>
            <li>Content-addressed storage (IPFS) reduces on-chain bloat.</li>
            <li>Decentralized Function-as-a-Service over blockchain.</li>
            <li>Cost-invariant, scalable deployment of ML models or functions.</li>
            <li>Optimizes blockchain economics using IPFS integration.</li>
          </ul>
        </div>

        <br>
        <h2>ğŸ§© How It Works</h2>
        <div class="diagram">
          <p><strong>Step 1:</strong> Upload your function code â†’ stored on IPFS</p>
          <p><strong>Step 2:</strong> IPFS returns a unique CID</p>
          <p><strong>Step 3:</strong> CID recorded on Ethereum smart contract</p>
          <p><strong>Step 4:</strong> Invoke function anytime via blockchain reference</p>
        </div>

        <br>
        <br>
        <h2>ğŸŒ Impact</h2>
        <div class="card">
          <p>
            By separating storage from verification, this approach enables a future where large-scale computations, AI models,
            and edge functions can be deployed on decentralized networks <strong>without escalating gas costs</strong>.
          </p>
        </div>
      </section>
    </div>

    <!-- ğŸ“¤ REGISTER TAB -->
    <div id="register" class="tab-content">
      <h2>Register a New Function</h2>
      <p style="color: #cbd5e1; margin-bottom: 20px;">Upload your JavaScript function to store it on IPFS and register it on the blockchain.</p>
      
      <form id="registerForm">
        <div class="form-group">
          <label for="functionName">Function Name</label>
          <input type="text" id="functionName" placeholder="e.g., helloTest" required>
        </div>
        
        <div class="form-group">
          <label for="codeFile">JavaScript File</label>
          <input type="file" id="codeFile" accept=".js" required>
          <small style="color: #cbd5e1;">Expected format: <code>module.exports = function(arg) { return result; };</code></small>
        </div>
        
        <button type="submit">ğŸš€ Register Function</button>
      </form>
      
      <div id="registerOutput" class="output" style="display: none;">
        <h3>Registration Result âœ…</h3>
        <pre id="registerResult"></pre>
        
        <div class="gas-savings-card" id="gasSavingsCard" style="display: none;">
          <h4>âš¡ Gas Fee & Cost Savings</h4>
          <div class="card-grid">
            <div>
              <p><strong>ğŸ“¦ File Size:</strong> <span id="fileSize"></span> KB</p>
              <p><strong>â›½ Gas Saved:</strong> <span id="gasSaved"></span> gas</p>
              <p><strong>ğŸ’¡ Reduction:</strong> <span id="costReduction"></span>x cheaper</p>
              <p><strong>ğŸ”¥ Savings:</strong> <span id="gasSavedPercent"></span>%</p>
            </div>
            <div class="usd-block">
              <p><strong>ğŸ’° On-Chain Cost:</strong> $<span id="usdOnChain"></span></p>
              <p><strong>âš™ï¸ Actual Cost:</strong> $<span id="usdActual"></span></p>
              <hr>
              <p class="highlight"><strong>âœ… USD Saved:</strong> $<span id="usdSaved"></span></p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ğŸ“‹ LIST TAB -->
    <div id="list" class="tab-content">
      <h2>Registered Functions</h2>
      <p style="color: #cbd5e1; margin-bottom: 20px;">All functions stored on the blockchain and IPFS.</p>
      <button onclick="listFunctions()">ğŸ”„ Refresh List</button>
      <div id="functionsOutput" class="output">
        <h3>Functions</h3>
        <div id="functionsList" class="function-list">
          <p style="color: #cbd5e1;">Click refresh to load functions...</p>
        </div>
      </div>
    </div>

    <!-- â–¶ï¸ INVOKE TAB -->
    <div id="invoke" class="tab-content">
      <h2>Invoke a Function</h2>
      <p style="color: #cbd5e1; margin-bottom: 20px;">Select and execute a registered function with input parameters.</p>
      
      <div class="form-group">
        <label for="functionSelect">Select Function</label>
        <select id="functionSelect" required></select>
      </div>
      
      <div class="form-group">
        <label for="invokeInput">Input Parameter (JSON array, e.g., ["World"])</label>
        <textarea id="invokeInput" rows="3" placeholder='["World"]'></textarea>
        <small style="color: #cbd5e1;">Leave empty for no arguments. Use JSON array format for multiple arguments.</small>
      </div>
      
      <button onclick="invokeFunction()">âš¡ Execute Function</button>
      
      <div id="invokeOutput" class="output" style="display: none;">
        <h3>Execution Result</h3>
        <pre id="invokeResult"></pre>
      </div>
    </div>
  </div>

  <script src="js/app.js"></script>
</body>
</html>
